@startuml
start
:Client sends request;
:Backend validates input;
:Orchestrator classifies intent;
if (heavy operation?) then (yes)
  :Create job record (Queued);
  :Return job_id to client;
  partition "Worker" {
    :Pick queued job;
    :Execute task;
    if (success?) then (yes)
      :Store result;
      :Mark job Completed;
    else (no)
      if (retries left?) then (yes)
        :Backoff;
        :Requeue job;
      else (no)
        :Mark job Failed;
      endif
    endif
  }
else (no)
  :Execute synchronously;
  :Return response;
endif
stop
@enduml

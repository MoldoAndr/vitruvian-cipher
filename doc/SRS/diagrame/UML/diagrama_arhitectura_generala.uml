@startuml
skinparam componentStyle rectangle
skinparam shadowing false
skinparam defaultFontName Arial
skinparam defaultFontSize 10
skinparam backgroundColor #FFFFFF
skinparam nodesep 25
skinparam ranksep 20
skinparam linetype ortho

top to bottom direction

rectangle "Client Layer" {
    component "Web UI" as Web
    component "CLI" as CLI
    component "API Consumer" as APIConsumer
}

rectangle "Edge Layer" {
    component "WAF / Reverse Proxy" as WAF
}

rectangle "Application Layer" {
    component "Backend API" as Backend
    component "Orchestrator" as Orch
}

rectangle "Agent Layer - Row 1" as AgentRow1 {
    component "Password Checker" as PWD
    component "Prime Checker" as PRM
    component "Theory Specialist" as RAG
}

rectangle "Agent Layer - Row 2" as AgentRow2 {
    component "Command Executor" as CMD
    component "Choice Maker" as NLP
    component "Cryptosystem Detection" as CRY
}

rectangle "Data Layer" {
    database "PostgreSQL" as PG
    database "Redis" as Redis
    database "ChromaDB" as Chroma
}

rectangle "External Dependencies" {
    component "HIBP API" as HIBP
    component "FactorDB" as FactorDB
    component "LLM Providers" as LLM
}

Web --> WAF
CLI --> WAF
APIConsumer --> WAF
WAF --> Backend
Backend --> Orch

Orch --> AgentRow1
Orch --> AgentRow2

Backend --> PG
Backend --> Redis
RAG --> Chroma

AgentRow1 --> "External Dependencies"
AgentRow2 --> "External Dependencies"

@enduml
